{"version":3,"file":"table.component.js","sourceRoot":"","sources":["table.component.ts"],"names":[],"mappings":";;;;;;AAAA,OAAO,EACL,SAAS,EACT,SAAS,GAEV,MAAM,eAAe,CAAC;AAEvB,OAAO,EAAE,EAAE,EAAE,MAAM,oBAAoB,CAAC;AACxC,OAAO,EAAE,KAAK,EAAE,MAAM,uBAAuB,CAAC;AAC9C,OAAO,EAAE,SAAS,EAAE,MAAM,0BAA0B,CAAC;AACrD,OAAO,EAAE,GAAG,EAAE,MAAM,oBAAoB,CAAC;AACzC,OAAO,EAAE,SAAS,EAAE,MAAM,0BAA0B,CAAC;AACrD,OAAO,EAAE,UAAU,EAAE,MAAM,2BAA2B,CAAC;AAGvD,OAAO,EACL,iBAAiB,EACjB,eAAe,EACf,oBAAoB,GAErB,MAAM,cAAc,CAAC;AAWtB,IAAM,SAAS,GAAgB;IAC7B;QACE,QAAQ,EAAE,KAAK;QACf,GAAG,EAAE,EAAE;QACP,KAAK,EAAE,WAAW;QAClB,MAAM,EAAE,IAAI;QACZ,OAAO,EAAE,IAAI;KACd;IACD;QACE,QAAQ,EAAE,KAAK;QACf,GAAG,EAAE,EAAE;QACP,KAAK,EAAE,WAAW;QAClB,MAAM,EAAE,IAAI;QACZ,OAAO,EAAE,KAAK;KACf;IACD;QACE,QAAQ,EAAE,KAAK;QACf,GAAG,EAAE,EAAE;QACP,KAAK,EAAE,WAAW;QAClB,MAAM,EAAE,IAAI;QACZ,OAAO,EAAE,IAAI;KACd;IACD;QACE,QAAQ,EAAE,MAAM;QAChB,GAAG,EAAE,EAAE;QACP,KAAK,EAAE,YAAY;QACnB,MAAM,EAAE,KAAK;QACb,OAAO,EAAE,IAAI;KACd;IACD;QACE,QAAQ,EAAE,MAAM;QAChB,GAAG,EAAE,GAAG;QACR,KAAK,EAAE,YAAY;QACnB,MAAM,EAAE,KAAK;QACb,OAAO,EAAE,KAAK;KACf;IACD;QACE,QAAQ,EAAE,MAAM;QAChB,GAAG,EAAE,EAAE;QACP,KAAK,EAAE,YAAY;QACnB,MAAM,EAAE,IAAI;QACZ,OAAO,EAAE,KAAK;KACf;CACF,CAAC;AAEF,IAAM,cAAc,GAAG;IACrB;QACE,IAAI,EAAE,UAAU;QAChB,KAAK,EAAE,UAAU;KAClB;IACD;QACE,IAAI,EAAE,KAAK;QACX,KAAK,EAAE,KAAK;KACb;IACD;QACE,IAAI,EAAE,OAAO;QACb,KAAK,EAAE,OAAO;KACf;IACD;QACE,IAAI,EAAE,WAAW;QACjB,KAAK,EAAE,QAAQ;KAChB;IACD;QACE,IAAI,EAAE,YAAY;QAClB,KAAK,EAAE,SAAS;KACjB;CACF,CAAC;AAEF,IAAM,qBAAqB,GAAG;IAC5B;QACE,IAAI,EAAE,SAAS;QACf,KAAK,EAAE,SAAS;KACjB;IACD;QACE,IAAI,EAAE,OAAO;QACb,KAAK,EAAE,OAAO;KACf;IACD;QACE,IAAI,EAAE,UAAU;QAChB,KAAK,EAAE,UAAU;KAClB;IACD;QACE,IAAI,EAAE,OAAO;QACb,KAAK,EAAE,OAAO;KACf;IACD;QACE,IAAI,EAAE,QAAQ;QACd,KAAK,EAAE,QAAQ;KAChB;CACF,CAAC;AAMF;IAuBE,wBACU,IAAgB;QAAhB,SAAI,GAAJ,IAAI,CAAY;QAvB1B,eAAU,GAAG,qBAAqB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QAQ5C,qBAAgB,GAAG;YACjB,SAAS;YACT,QAAQ;YACR,OAAO;YACP,OAAO;YACP,UAAU;SACX,CAAC;QAEF,eAAU,GAAG,IAAI,iBAAiB,EAAE,CAAC;QACrC,kBAAa,GAAG,CAAC,CAAC;QAClB,qBAAgB,GAAG,KAAK,CAAC;QACzB,uBAAkB,GAAG,KAAK,CAAC;IAKxB,CAAC;IAEJ,wCAAe,GAAf;QAAA,iBAwCC;QAvCC,IAAI,CAAC,eAAe,GAAG,IAAI,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAErD,oEAAoE;QACpE,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC;YAC7B,OAAO,CAAC,GAAG,CAAC,yBAAyB,CAAC,CAAC;YACvC,KAAI,CAAC,SAAS,CAAC,gBAAgB,GAAG,CAAC,CAAC;QACtC,CAAC,CAAC,CAAC;QAEH,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,SAAS,CAAC,UAAU,EAAE,IAAI,CAAC,SAAS,CAAC,oBAAoB,CAAC;aACxF,IAAI,CACH,SAAS,CAAC,EAAE,CAAC,EACb,SAAS,CAAC;YACR,KAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;YAE7B,MAAM,CAAC,KAAI,CAAC,eAAe,CAAC,aAAa,CACvC,KAAI,CAAC,IAAI,CAAC,MAAM,EAChB,KAAI,CAAC,IAAI,CAAC,SAAS,EACnB,KAAI,CAAC,SAAS,CAAC,gBAAgB,EAC/B,KAAI,CAAC,SAAS,CAAC,cAAc,CAC9B,CAAC;QACJ,CAAC,CAAC,EACF,GAAG,CAAC,UAAA,IAAI;YACN,OAAO,CAAC,GAAG,CAAC,sBAAsB,EAAE,IAAI,CAAC,CAAA;YACzC,+CAA+C;YAC/C,KAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;YAC9B,KAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;YAChC,KAAI,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC;YAEtC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;QACpB,CAAC,CAAC,EACF,UAAU,CAAC;YACT,KAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;YAC9B,yEAAyE;YACzE,KAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;YAC/B,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QAChB,CAAC,CAAC,CACH,CAAC,SAAS,CAAC,UAAA,IAAI;YACd,KAAI,CAAC,UAAU,CAAC,IAAI,GAAG,IAAI,CAAC;QAC9B,CAAC,CAAC,CAAC;IACP,CAAC;IAGD;;;;;;;;;;;;;;OAcG;IAGH,sCAAa,GAAb,UAAc,CAAS;QACrB,OAAO,CAAC,GAAG,CAAC,iCAAiC,EAAE,CAAC,CAAC,CAAC;IACpD,CAAC;IAED,qCAAY,GAAZ,UAAa,CAAsB;QACjC,OAAO,CAAC,GAAG,CAAC,sBAAsB,EAAE,CAAC,CAAC,CAAC;IACzC,CAAC;IAED,8BAAK,GAAL,UAAM,CAAM;QACV,OAAO,CAAC,GAAG,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC;IACjC,CAAC;IAED,iCAAQ,GAAR,UAAS,CAAM;QACb,OAAO,CAAC,GAAG,CAAC,iBAAiB,EAAE,CAAC,CAAC,CAAC;IACpC,CAAC;IAED,6BAAI,GAAJ,UAAK,CAAM;QACT,OAAO,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;IAChC,CAAC;IAED,6BAAI,GAAJ,UAAK,CAAM;QACT,OAAO,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;IAChC,CAAC;IAzGD;QADC,SAAS,CAAC,eAAe,CAAC;gDACL;IAGtB;QADC,SAAS,CAAC,oBAAoB,CAAC;qDACA;IAPrB,cAAc;QAJ1B,SAAS,CAAC;YACT,QAAQ,EAAE,YAAY;YACtB,WAAW,EAAE,wBAAwB;SACtC,CAAC;OACW,cAAc,CAkH1B;IAAD,qBAAC;CAAA,AAlHD,IAkHC;SAlHY,cAAc;AAiI3B,oFAAoF;AACpF;IACE,wBAAoB,IAAgB;QAAhB,SAAI,GAAJ,IAAI,CAAY;IAAG,CAAC;IAExC,sCAAa,GAAb,UAAc,IAAY,EAAE,KAAa,EAAE,IAAY,EAAE,OAAe;QACtE,IAAM,IAAI,GAAG,sCAAsC,CAAC;QACpD,IAAM,UAAU,GAAM,IAAI,oCAAiC,CAAC;QAC5D,IAAM,YAAY,GAAG,WAAS,IAAI,eAAU,KAAK,eAAS,IAAI,GAAG,CAAC,mBAAa,OAAS,CAAC;QAEzF,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAY,KAAG,UAAU,GAAG,YAAc,CAAC,CAAC;IAClE,CAAC;IACH,qBAAC;AAAD,CAAC,AAVD,IAUC","sourcesContent":["import {\n  Component,\n  ViewChild,\n  AfterViewInit,\n} from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { of } from 'rxjs/observable/of';\nimport { merge } from 'rxjs/observable/merge';\nimport { startWith } from 'rxjs/operators/startWith';\nimport { map } from 'rxjs/operators/map';\nimport { switchMap } from 'rxjs/operators/switchMap';\nimport { catchError } from 'rxjs/operators/catchError';\nimport { Observable } from 'rxjs/Observable';\n\nimport {\n  TsTableDataSource,\n  TsSortDirective,\n  TsPaginatorComponent,\n  TsPaginatorMenuItem,\n} from '@terminus/ui';\n\n\nexport interface TableItem {\n  username: string;\n  age: number;\n  title: string;\n  active: boolean;\n  visible: boolean;\n}\n\nconst DATA_MOCK: TableItem[] = [\n  {\n    username: 'foo',\n    age: 12,\n    title: 'foo title',\n    active: true,\n    visible: true,\n  },\n  {\n    username: 'bar',\n    age: 34,\n    title: 'bar title',\n    active: true,\n    visible: false,\n  },\n  {\n    username: 'baz',\n    age: 22,\n    title: 'baz title',\n    active: true,\n    visible: true,\n  },\n  {\n    username: 'bing',\n    age: 47,\n    title: 'bing title',\n    active: false,\n    visible: true,\n  },\n  {\n    username: 'boom',\n    age: 111,\n    title: 'boom title',\n    active: false,\n    visible: false,\n  },\n  {\n    username: 'bang',\n    age: 61,\n    title: 'bang title',\n    active: true,\n    visible: false,\n  },\n];\n\nconst COLUMNS_SOURCE = [\n  {\n    name: 'Username',\n    value: 'username',\n  },\n  {\n    name: 'Age',\n    value: 'age',\n  },\n  {\n    name: 'Title',\n    value: 'title',\n  },\n  {\n    name: 'Is Active',\n    value: 'active',\n  },\n  {\n    name: 'Is Visible',\n    value: 'visible',\n  },\n];\n\nconst COLUMNS_SOURCE_GITHUB = [\n  {\n    name: 'Created',\n    value: 'created',\n  },\n  {\n    name: 'Title',\n    value: 'title',\n  },\n  {\n    name: 'Comments',\n    value: 'comments',\n  },\n  {\n    name: 'State',\n    value: 'state',\n  },\n  {\n    name: 'Number',\n    value: 'number',\n  },\n];\n\n@Component({\n  selector: 'demo-table',\n  templateUrl: './table.component.html',\n})\nexport class TableComponent implements AfterViewInit {\n  allColumns = COLUMNS_SOURCE_GITHUB.slice(0);\n\n  @ViewChild(TsSortDirective)\n  sort: TsSortDirective;\n\n  @ViewChild(TsPaginatorComponent)\n  paginator: TsPaginatorComponent;\n\n  displayedColumns = [\n    'created',\n    'number',\n    'title',\n    'state',\n    'comments',\n  ];\n  exampleDatabase: ExampleHttpDao | null;\n  dataSource = new TsTableDataSource();\n  resultsLength = 0;\n  isLoadingResults = false;\n  isRateLimitReached = false;\n\n\n  constructor(\n    private http: HttpClient,\n  ) {}\n\n  ngAfterViewInit() {\n    this.exampleDatabase = new ExampleHttpDao(this.http);\n\n    // If the user changes the sort order, reset back to the first page.\n    this.sort.sortChange.subscribe(() => {\n      console.log('in sortChange subscribe');\n      this.paginator.currentPageIndex = 0;\n    });\n\n    merge(this.sort.sortChange, this.paginator.pageSelect, this.paginator.recordsPerPageChange)\n      .pipe(\n        startWith({}),\n        switchMap(() => {\n          this.isLoadingResults = true;\n\n          return this.exampleDatabase.getRepoIssues(\n            this.sort.active,\n            this.sort.direction,\n            this.paginator.currentPageIndex,\n            this.paginator.recordsPerPage,\n          );\n        }),\n        map(data => {\n          console.log('Demo: fetched data: ', data)\n          // Flip flag to show that loading has finished.\n          this.isLoadingResults = false;\n          this.isRateLimitReached = false;\n          this.resultsLength = data.total_count;\n\n          return data.items;\n        }),\n        catchError(() => {\n          this.isLoadingResults = false;\n          // Catch if the GitHub API has reached its rate limit. Return empty data.\n          this.isRateLimitReached = true;\n          return of([]);\n        })\n      ).subscribe(data => {\n        this.dataSource.data = data;\n      });\n  }\n\n\n  /*\n   *{\n   *  search_term: 'foo',\n   *  s: [\n   *    {\n   *      name: 'name',\n   *      dir: 'asc',\n   *    },\n   *    {\n   *      name: 'id',\n   *      dir: 'desc',\n   *    },\n   *  ],\n   *}\n   */\n\n\n  perPageChange(e: number) {\n    console.log('DEMO records per page changed: ', e);\n  }\n\n  onPageSelect(e: TsPaginatorMenuItem) {\n    console.log('DEMO page selected: ', e);\n  }\n\n  first(e: any) {\n    console.log('DEMO first: ', e);\n  }\n\n  previous(e: any) {\n    console.log('DEMO previous: ', e);\n  }\n\n  next(e: any) {\n    console.log('DEMO next: ', e);\n  }\n\n  last(e: any) {\n    console.log('DEMO last: ', e);\n  }\n\n\n\n\n}\n\n\nexport interface GithubApi {\n  items: GithubIssue[];\n  total_count: number;\n}\n\nexport interface GithubIssue {\n  created_at: string;\n  number: string;\n  state: string;\n  title: string;\n}\n\n/** An example database that the data source uses to retrieve data for the table. */\nexport class ExampleHttpDao {\n  constructor(private http: HttpClient) {}\n\n  getRepoIssues(sort: string, order: string, page: number, perPage: number): Observable<GithubApi> {\n    const href = 'https://api.github.com/search/issues';\n    const requestUrl = `${href}?q=repo:GetTerminus/terminus-ui`;\n    const requestQuery = `&sort=${sort}&order=${order}&page=${page + 1}&per_page=${perPage}`;\n\n    return this.http.get<GithubApi>(`${requestUrl}${requestQuery}`);\n  }\n}\n"]}